<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bitcoin II — Second Chance Dashboard</title>
    <meta
      name="description"
      content="Live Bitcoin II (BC2) dashboard with price telemetry, halving progress, block feed, market listings, and curated community resources."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: dark;
        --page-max: 1100px;
        --space-1: 0.35rem;
        --space-2: 0.5rem;
        --space-3: 0.75rem;
        --space-4: 1rem;
        --space-5: 1.5rem;
        --space-6: 2rem;
        --radius-sm: 0.75rem;
        --radius-md: 1.25rem;
        --radius-lg: 2rem;
        --bg: radial-gradient(circle at 10% -10%, rgba(255, 190, 92, 0.12), transparent 55%),
          radial-gradient(circle at 85% 20%, rgba(255, 206, 126, 0.16), transparent 60%),
          linear-gradient(165deg, #070708 0%, #050506 55%, #020202 100%);
        --surface: rgba(18, 18, 20, 0.9);
        --surface-strong: rgba(23, 23, 26, 0.94);
        --surface-soft: rgba(12, 12, 15, 0.74);
        --border: rgba(247, 187, 78, 0.22);
        --border-strong: rgba(247, 187, 78, 0.4);
        --border-soft: rgba(247, 187, 78, 0.12);
        --shadow: 0 24px 48px rgba(0, 0, 0, 0.4);
        --text-strong: #fdf7e8;
        --text-muted: rgba(255, 230, 186, 0.75);
        --text-soft: rgba(255, 230, 186, 0.55);
        --accent: #f5b63b;
        --accent-soft: rgba(245, 182, 59, 0.18);
        --accent-strong: #ffd98a;
        --accent-gradient: linear-gradient(135deg, #ffe6a1, #f4b33a 55%, #c57a16);
        --danger: #ff7a8b;
        font-family: "Space Grotesk", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: var(--bg);
        color: var(--text-strong);
        font-family: inherit;
        line-height: 1.55;
        letter-spacing: 0.01em;
        scroll-behavior: smooth;
        position: relative;
        overflow-x: hidden;
      }

      body.nav-open {
        overflow: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: radial-gradient(circle at 20% 0%, rgba(250, 200, 120, 0.08), transparent 45%),
          radial-gradient(circle at 80% 20%, rgba(255, 221, 140, 0.06), transparent 55%),
          linear-gradient(120deg, rgba(255, 196, 105, 0.08), rgba(0, 0, 0, 0));
        pointer-events: none;
        z-index: -1;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      a:hover,
      a:focus-visible {
        color: var(--accent-strong);
      }

      body.show-focus a:focus-visible,
      body.show-focus button:focus-visible,
      body.show-focus input:focus-visible,
      body.show-focus select:focus-visible,
      body.show-focus textarea:focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 3px;
      }

      ::selection {
        background: rgba(245, 182, 59, 0.4);
        color: #110d04;
      }

      .page {
        max-width: var(--page-max);
        margin: 0 auto;
        padding: var(--space-4) var(--space-4) var(--space-6);
        position: relative;
        z-index: 1;
      }

      .page::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: var(--radius-lg);
        background: linear-gradient(160deg, rgba(255, 214, 128, 0.04), rgba(0, 0, 0, 0));
        pointer-events: none;
        opacity: 0.9;
      }

      header.top-nav {
        position: sticky;
        top: 0;
        z-index: 40;
        backdrop-filter: blur(18px);
        background: rgba(6, 6, 7, 0.84);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        margin-bottom: var(--space-5);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        padding: var(--space-3) var(--space-4);
        overflow: visible;
      }

      .nav-bar {
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .brand-block {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        flex: 1 1 auto;
      }

      .brand-logo {
        --tilt-x: 0deg;
        --tilt-y: 0deg;
        --glow-x: 50%;
        --glow-y: 50%;
        width: 52px;
        height: 52px;
        border-radius: 18px;
        display: grid;
        place-items: center;
        background: radial-gradient(circle at var(--glow-x) var(--glow-y), rgba(255, 204, 102, 0.3), transparent 60%),
          rgba(20, 20, 24, 0.82);
        border: 1px solid var(--border);
        box-shadow: inset 0 0 0 1px rgba(255, 214, 128, 0.12), 0 18px 28px rgba(0, 0, 0, 0.48);
        transform: perspective(900px) rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
        transition: box-shadow 0.3s ease, transform 0.3s ease;
      }

      .brand-logo img {
        width: 32px;
        height: 32px;
      }

      .brand-meta {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .brand-meta h1 {
        font-size: clamp(1.05rem, 2.6vw, 1.25rem);
        margin: 0;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .brand-meta p {
        margin: 0;
        color: var(--text-soft);
        font-size: clamp(0.68rem, 2vw, 0.78rem);
        letter-spacing: 0.12em;
        text-transform: uppercase;
      }

      .nav-toggle {
        appearance: none;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-strong);
        border-radius: var(--radius-sm);
        padding: 0.45rem 0.75rem;
        font-size: 0.85rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .nav-toggle-icon {
        display: grid;
        gap: 4px;
      }

      .nav-toggle-icon span {
        width: 20px;
        height: 2px;
        background: var(--accent);
        border-radius: 999px;
        display: block;
      }

      .explorer-launch {
        position: relative;
        display: grid;
        grid-template-columns: auto;
        gap: 0.45rem;
        padding: 0.7rem 1.2rem;
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        background: linear-gradient(140deg, rgba(34, 25, 10, 0.88), rgba(12, 9, 4, 0.82));
        color: var(--text-strong);
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.14em;
        box-shadow: inset 0 0 0 1px rgba(255, 214, 128, 0.16), 0 24px 36px rgba(0, 0, 0, 0.55);
        text-align: left;
      }

      .explorer-launch .launch-title {
        font-weight: 600;
        font-size: 0.8rem;
      }

      .explorer-status {
        display: flex;
        align-items: center;
        gap: 0.45rem;
        color: var(--text-muted);
      }

      .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.22);
      }

      .status-dot.is-live {
        background: #7df7c6;
        box-shadow: 0 0 10px rgba(125, 247, 198, 0.6);
      }

      .status-dot.is-offline {
        background: var(--danger);
        box-shadow: 0 0 10px rgba(255, 122, 139, 0.6);
      }

      .explorer-launch .launch-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem;
        color: var(--text-soft);
      }

      .nav-overlay {
        position: fixed;
        inset: 0;
        background: rgba(5, 5, 6, 0.75);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
        z-index: 45;
      }

      header.top-nav.is-nav-open .nav-overlay {
        opacity: 1;
        pointer-events: auto;
      }

      nav#primary-navigation {
        position: absolute;
        top: calc(100% + var(--space-3));
        left: 0;
        right: 0;
        display: grid;
        gap: var(--space-2);
        background: var(--surface);
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        padding: var(--space-3);
        box-shadow: var(--shadow);
        max-height: min(70vh, 480px);
        overflow-y: auto;
        overscroll-behavior: contain;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transform: translateY(-12px);
        transition: opacity 0.25s ease, transform 0.25s ease;
        z-index: 50;
      }

      nav#primary-navigation[aria-hidden="false"] {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
        transform: translateY(0);
      }

      details.nav-dropdown {
        border: 1px solid var(--border-soft);
        border-radius: var(--radius-sm);
        background: var(--surface-strong);
        padding: 0.6rem 0.85rem;
        transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
      }

      details.nav-dropdown > summary {
        list-style: none;
        cursor: pointer;
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: var(--space-3);
        padding: 0;
      }

      .nav-summary-text {
        display: grid;
        gap: 0.15rem;
      }

      .nav-summary-text .nav-label {
        font-size: 0.82rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }

      .nav-summary-text .nav-subtext {
        font-size: 0.65rem;
        color: var(--text-soft);
        letter-spacing: 0.08em;
      }

      details.nav-dropdown > summary::-webkit-details-marker {
        display: none;
      }

      details.nav-dropdown > summary::after {
        content: "";
        width: 8px;
        height: 8px;
        border-right: 2px solid var(--accent);
        border-bottom: 2px solid var(--accent);
        transform: rotate(45deg);
        transition: transform 0.2s ease;
        flex-shrink: 0;
      }

      details.nav-dropdown[open] > summary::after {
        transform: rotate(-135deg);
      }

      .nav-dropdown-panel {
        margin-top: 0.75rem;
        padding-top: 0.75rem;
        border-top: 1px solid var(--border-soft);
      }

      .nav-dropdown-panel ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        gap: 0.5rem;
      }

      .nav-dropdown-panel a {
        display: inline-flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.6rem;
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .nav-dropdown-panel a:hover,
      .nav-dropdown-panel a:focus-visible {
        color: var(--accent-strong);
      }

      main {
        display: grid;
        gap: var(--space-5);
      }

      .hero {
        display: grid;
        gap: var(--space-4);
        position: relative;
      }

      .hero::before {
        content: "";
        position: absolute;
        inset: -30% 10% auto 5%;
        height: 180%;
        background: radial-gradient(circle at top, rgba(255, 201, 108, 0.08), transparent 65%);
        pointer-events: none;
        z-index: 0;
      }

      .hero-intro {
        display: grid;
        gap: var(--space-3);
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius-md);
        padding: var(--space-4);
        box-shadow: var(--shadow);
        position: relative;
        z-index: 1;
      }

      .eyebrow {
        text-transform: uppercase;
        letter-spacing: 0.3em;
        font-size: 0.7rem;
        color: var(--text-muted);
        margin: 0;
      }

      .eyebrow--wide {
        letter-spacing: 0.24em;
      }

      .hero-intro h2 {
        margin: 0;
        font-size: clamp(1.8rem, 5vw, 2.6rem);
        line-height: 1.1;
      }

      .hero-intro p {
        margin: 0;
        color: var(--text-muted);
        font-size: 0.95rem;
      }

      .hero-actions {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-2);
        align-items: center;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        border-radius: 999px;
        padding: 0.55rem 1.4rem;
        font-size: 0.9rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        border: 1px solid var(--border);
      }

      .btn.primary {
        background: var(--accent-gradient);
        color: #1b1205;
        font-weight: 600;
      }

      .btn.ghost {
        background: transparent;
        color: var(--text-strong);
      }

      .hero-meta {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-2);
        color: var(--text-soft);
        font-size: 0.8rem;
      }

      .hero-panels {
        display: grid;
        gap: var(--space-3);
        position: relative;
        z-index: 1;
      }

      .hero-market {
        display: grid;
        gap: var(--space-3);
        padding: var(--space-4);
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        background: var(--surface-strong);
        box-shadow: var(--shadow);
        min-height: 100%;
      }

      .price-row {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: var(--space-2);
      }

      .price-row strong {
        font-size: clamp(1.6rem, 5vw, 2.2rem);
      }

      .change-label {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        color: var(--text-muted);
        font-size: 0.85rem;
      }

      .change-label span {
        font-weight: 600;
        font-size: 1rem;
      }

      .sparkline {
        width: 100%;
        min-height: 60px;
        border-radius: var(--radius-sm);
        background: rgba(255, 214, 128, 0.04);
        border: 1px dashed rgba(255, 214, 128, 0.18);
        display: grid;
        place-items: center;
        overflow: hidden;
      }

      .hero-stats {
        display: grid;
        gap: var(--space-3);
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      }

      .quick-glance {
        display: grid;
        gap: var(--space-3);
      }

      .quick-glance.section-card {
        background: var(--surface);
      }

      .quick-glance-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: var(--space-2);
      }

      .quick-glance strong {
        font-size: clamp(1.3rem, 4vw, 1.8rem);
      }

      .stat-tile {
        background: var(--surface);
        border-radius: var(--radius-sm);
        padding: var(--space-3);
        border: 1px solid var(--border-soft);
        display: grid;
        gap: 0.35rem;
      }

      .stat-tile span {
        color: var(--text-soft);
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.16em;
      }

      .stat-tile strong {
        font-size: 1rem;
      }

      .stat-tile small {
        color: var(--text-muted);
      }

      .negative {
        color: var(--danger);
      }

      .supply-grid {
        display: grid;
        gap: var(--space-3);
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      }

      .section-card {
        background: var(--surface-strong);
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        padding: var(--space-4);
        display: grid;
        gap: var(--space-3);
        box-shadow: var(--shadow);
      }

      .hero-intro.section-card {
        background: var(--surface);
      }

      .section-heading {
        display: flex;
        justify-content: space-between;
        gap: var(--space-2);
        align-items: baseline;
        flex-wrap: wrap;
      }

      .section-heading h3 {
        margin: 0;
        font-size: clamp(1.05rem, 3vw, 1.3rem);
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }

      .section-subtitle {
        color: var(--text-muted);
        font-size: 0.85rem;
      }

      .section-title {
        margin: 0;
        font-size: clamp(1.05rem, 3vw, 1.25rem);
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }

      .metric-title {
        margin: 0;
        font-size: clamp(1.2rem, 4vw, 1.5rem);
        letter-spacing: 0.04em;
      }

      .metric-subtitle {
        display: block;
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      .metric-details {
        display: grid;
        gap: 0.35rem;
        margin-top: 0.75rem;
      }

      .progress-card {
        display: grid;
        gap: var(--space-3);
      }

      .progress-bar {
        width: 100%;
        height: 10px;
        border-radius: 999px;
        background: rgba(255, 214, 128, 0.16);
        overflow: hidden;
      }

      .progress-bar span {
        display: block;
        height: 100%;
        background: var(--accent-gradient);
        width: 0%;
      }

      .network-shell {
        display: grid;
        gap: var(--space-3);
      }

      .network-summary {
        display: grid;
        gap: var(--space-3);
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        margin-top: var(--space-3);
      }

      .network-card {
        background: var(--surface);
        border: 1px solid var(--border-soft);
        border-radius: var(--radius-sm);
        padding: var(--space-3);
        display: grid;
        gap: 0.4rem;
      }

      .network-card span {
        text-transform: uppercase;
        letter-spacing: 0.12em;
        font-size: 0.75rem;
        color: var(--text-soft);
      }

      .network-card strong {
        font-size: 1.1rem;
      }

      .network-meta {
        color: var(--text-soft);
        font-size: 0.8rem;
      }

      .block-shell {
        display: grid;
        gap: var(--space-3);
      }

      .block-feed-wrapper,
      .follow-card {
        background: var(--surface-strong);
        border: 1px solid var(--border);
        border-radius: var(--radius-md);
        padding: var(--space-4);
        box-shadow: var(--shadow);
      }

      ul.block-feed {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        gap: var(--space-3);
      }

      ul.block-feed li {
        display: grid;
        gap: 0.35rem;
        background: rgba(12, 12, 15, 0.55);
        border: 1px solid var(--border-soft);
        border-radius: var(--radius-sm);
        padding: var(--space-3);
      }

      .block-headline {
        display: flex;
        justify-content: space-between;
        font-weight: 600;
        font-size: 0.95rem;
      }

      .block-meta {
        color: var(--text-soft);
        font-size: 0.8rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .follow-grid {
        display: grid;
        gap: 0.75rem;
      }

      .follow-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: var(--space-2);
      }

      .follow-label {
        text-transform: uppercase;
        font-size: 0.72rem;
        color: var(--text-soft);
        letter-spacing: 0.12em;
      }

      .markets-card {
        background: var(--surface);
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        padding: var(--space-4);
        display: grid;
        gap: var(--space-3);
        box-shadow: var(--shadow);
      }

      .table-wrapper {
        overflow-x: auto;
        border-radius: var(--radius-sm);
        border: 1px solid var(--border-soft);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        min-width: 440px;
      }

      th,
      td {
        padding: 0.75rem 1rem;
        text-align: left;
        font-size: 0.9rem;
      }

      thead {
        background: rgba(255, 214, 128, 0.05);
        text-transform: uppercase;
        letter-spacing: 0.16em;
        font-size: 0.75rem;
      }

      tbody tr + tr {
        border-top: 1px solid var(--border-soft);
      }

      .trade-card {
        background: var(--surface-strong);
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        padding: var(--space-4);
        display: grid;
        gap: var(--space-3);
        box-shadow: var(--shadow);
      }

      .trade-form {
        display: grid;
        gap: var(--space-3);
      }

      .input-group {
        display: grid;
        gap: 0.35rem;
      }

      label {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: var(--text-soft);
      }

      input,
      select {
        width: 100%;
        padding: 0.6rem 0.75rem;
        border-radius: var(--radius-sm);
        border: 1px solid var(--border);
        background: rgba(12, 12, 15, 0.9);
        color: var(--text-strong);
        font-size: 0.95rem;
      }

      .trade-meta {
        display: grid;
        gap: 0.5rem;
        background: rgba(12, 12, 15, 0.55);
        border: 1px solid var(--border-soft);
        border-radius: var(--radius-sm);
        padding: var(--space-3);
      }

      .help-text {
        color: var(--text-soft);
        font-size: 0.85rem;
      }

      .trade-note {
        color: var(--text-soft);
        font-size: 0.85rem;
      }

      .trade-meta-row {
        display: flex;
        justify-content: space-between;
        font-size: 0.9rem;
      }

      footer {
        margin-top: var(--space-6);
        padding: var(--space-4);
        border-top: 1px solid var(--border-soft);
        color: var(--text-soft);
        font-size: 0.75rem;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        text-align: center;
      }

      footer .footer-donate {
        display: block;
        margin-top: 0.4rem;
        font-size: 0.8rem;
        letter-spacing: 0.04em;
        color: var(--accent-strong);
      }

      @media (min-width: 720px) {
        .page {
          padding: var(--space-5) var(--space-6) var(--space-6);
        }

        header.top-nav {
          margin-bottom: var(--space-6);
        }

        nav#primary-navigation {
          position: relative;
          top: 0;
          margin-top: var(--space-3);
          max-height: none;
          overflow: visible;
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
          transform: none;
          transition: none;
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .hero {
          grid-template-columns: minmax(0, 1.05fr) minmax(0, 0.95fr);
          align-items: stretch;
        }

        .hero-panels {
          grid-template-columns: 1fr;
        }

        .block-shell {
          grid-template-columns: minmax(0, 1fr) minmax(0, 0.65fr);
        }

        nav#primary-navigation[aria-hidden="true"],
        nav#primary-navigation[aria-hidden="false"] {
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
          transform: none;
        }
      }

      @media (min-width: 900px) {
        header.top-nav {
          display: grid;
          gap: var(--space-3);
          overflow: visible;
        }

        .nav-bar {
          gap: var(--space-4);
        }

        .nav-toggle,
        .nav-overlay {
          display: none;
        }

        nav#primary-navigation {
          position: relative;
          display: grid;
          grid-template-columns: repeat(4, minmax(0, 1fr));
          padding: var(--space-2);
          gap: var(--space-2);
          border-radius: var(--radius-md);
          border: 1px solid var(--border-soft);
          background: linear-gradient(160deg, rgba(18, 16, 12, 0.82), rgba(8, 7, 6, 0.9));
          backdrop-filter: blur(18px);
          box-shadow: 0 22px 40px rgba(0, 0, 0, 0.5);
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
          transform: none;
          transition: none;
          max-height: none;
          overflow: visible;
        }

        details.nav-dropdown {
          position: relative;
          height: 100%;
          padding: var(--space-3);
          background: linear-gradient(180deg, rgba(28, 24, 18, 0.9), rgba(12, 11, 9, 0.82));
          border: 1px solid var(--border-soft);
          box-shadow: inset 0 0 0 1px rgba(255, 214, 128, 0.08);
        }

        details.nav-dropdown:hover,
        details.nav-dropdown:focus-within {
          border-color: var(--border);
          box-shadow: 0 18px 32px rgba(0, 0, 0, 0.45), inset 0 0 0 1px rgba(255, 214, 128, 0.18);
          transform: translateY(-2px);
        }

        .nav-dropdown-panel {
          position: absolute;
          left: 0;
          right: 0;
          top: calc(100% + var(--space-2));
          margin-top: 0;
          padding: var(--space-3);
          border-top: none;
          border: 1px solid var(--border);
          border-radius: var(--radius-md);
          background: rgba(12, 12, 15, 0.96);
          box-shadow: 0 26px 48px rgba(0, 0, 0, 0.55);
          opacity: 0;
          transform: translateY(-6px);
          transition: opacity 0.2s ease, transform 0.2s ease;
          pointer-events: none;
          z-index: 12;
        }

        details.nav-dropdown[open] .nav-dropdown-panel {
          opacity: 1;
          transform: translateY(0);
          pointer-events: auto;
        }

        .nav-dropdown-panel ul {
          gap: 0.45rem;
        }

        .nav-summary-text .nav-label {
          font-size: 0.8rem;
        }

        .nav-summary-text .nav-subtext {
          font-size: 0.62rem;
          letter-spacing: 0.12em;
          text-transform: uppercase;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header class="top-nav">
        <div class="nav-bar">
          <div class="brand-block">
            <button class="nav-toggle" type="button" aria-expanded="false" aria-controls="primary-navigation">
              <span class="nav-toggle-icon" aria-hidden="true">
                <span></span>
                <span></span>
                <span></span>
              </span>
              <span>Menu</span>
            </button>
            <span class="brand-logo">
              <img src="Bitcoin2-logo-128.png" alt="Bitcoin II crest" />
            </span>
            <div class="brand-meta">
              <h1>Bitcoin II</h1>
              <p>The second chance protocol dashboard</p>
            </div>
          </div>
          <a class="explorer-launch" href="https://bitcoinii.space/" target="_blank" rel="noreferrer">
            <span class="launch-title">Launch explorer</span>
            <span class="explorer-status">
              <span class="status-dot" id="nav-explorer-dot" aria-hidden="true"></span>
              <span id="nav-explorer-status">Syncing…</span>
            </span>
            <span class="launch-meta">
              <span>Block <strong id="nav-height">--</strong></span>
              <span id="nav-explorer-age">—</span>
            </span>
          </a>
        </div>
        <div class="nav-overlay" aria-hidden="true"></div>
        <nav id="primary-navigation" aria-hidden="true" aria-label="Essential Bitcoin II resources">
          <details class="nav-dropdown">
            <summary>
              <span class="nav-summary-text">
                <span class="nav-label">General</span>
                <span class="nav-subtext">Overview &amp; docs</span>
              </span>
            </summary>
            <div class="nav-dropdown-panel">
              <ul>
                <li>
                  <a href="https://coinpaprika.com/coin/bc2-bitcoin-ii/" target="_blank" rel="noreferrer"
                    >CoinPaprika asset overview</a
                  >
                </li>
                <li>
                  <a href="https://github.com/Bitcoin-II/BitcoinII-Core" target="_blank" rel="noreferrer"
                    >GitHub repository</a
                  >
                </li>
                <li>
                  <a href="https://bitcoinii.space/" target="_blank" rel="noreferrer">BC2 explorer</a>
                </li>
                <li>
                  <a href="https://bitcoinii.ddns.net/NodeMap.html" target="_blank" rel="noreferrer">Node map</a>
                </li>
                <li>
                  <a href="https://bitcoinii.ddns.net/DailyReport.html" target="_blank" rel="noreferrer"
                    >Daily network report</a
                  >
                </li>
              </ul>
            </div>
          </details>
          <details class="nav-dropdown">
            <summary>
              <span class="nav-summary-text">
                <span class="nav-label">Exchanges</span>
                <span class="nav-subtext">Trade &amp; price</span>
              </span>
            </summary>
            <div class="nav-dropdown-panel">
              <ul>
                <li>
                  <a href="https://www.coinex.com/en/info/BC2" target="_blank" rel="noreferrer"
                    >CoinEx — BC2 overview</a
                  >
                </li>
                <li>
                  <a href="https://rabid-rabbit.org/account/trade/BC2-USDT" target="_blank" rel="noreferrer"
                    >Rabid Rabbit — BC2/USDT</a
                  >
                </li>
                <li>
                  <a href="https://trade.nestex.one/spot/BC2" target="_blank" rel="noreferrer">NestEX spot</a>
                </li>
                <li>
                  <a href="https://klingex.io/trade/BC2-USDT" target="_blank" rel="noreferrer"
                    >Kling Exchange — BC2/USDT</a
                  >
                </li>
                <li>
                  <a href="https://nonkyc.io/market/BC2_USDT" target="_blank" rel="noreferrer">nonKYC market</a>
                </li>
              </ul>
            </div>
          </details>
          <details class="nav-dropdown">
            <summary>
              <span class="nav-summary-text">
                <span class="nav-label">Wallets &amp; Tools</span>
                <span class="nav-subtext">Store &amp; build</span>
              </span>
            </summary>
            <div class="nav-dropdown-panel">
              <ul>
                <li>
                  <a href="https://github.com/Bitcoin-II/BitcoinII-Core/releases" target="_blank" rel="noreferrer"
                    >Core wallet (desktop)</a
                  >
                </li>
                <li>
                  <a href="https://wallet-bc2.nitopool.fr/" target="_blank" rel="noreferrer"
                    >NitoPool hosted web wallet</a
                  >
                </li>
                <li>
                  <a
                    href="https://play.google.com/store/apps/details?id=network.bitcoinii.bluewallet&hl=en_US"
                    target="_blank"
                    rel="noreferrer"
                    >Android wallet by the organization</a
                  >
                </li>
                <li>
                  <a href="https://t.me/BitcoinIIOrganization" target="_blank" rel="noreferrer"
                    >Wallet setup support (Telegram)</a
                  >
                </li>
              </ul>
            </div>
          </details>
          <details class="nav-dropdown">
            <summary>
              <span class="nav-summary-text">
                <span class="nav-label">Community</span>
                <span class="nav-subtext">Connect &amp; support</span>
              </span>
            </summary>
            <div class="nav-dropdown-panel">
              <ul>
                <li>
                  <a href="https://discord.gg/aGJa8WpV2Y" target="_blank" rel="noreferrer">Discord</a>
                </li>
                <li>
                  <a href="https://t.me/BitcoinIIOrganization" target="_blank" rel="noreferrer">Telegram</a>
                </li>
                <li>
                  <a href="https://bitcoinii.org/" target="_blank" rel="noreferrer">Bitcoin II Organization</a>
                </li>
                <li>
                  <a href="https://www.reddit.com/r/BitcoinIIOfficial/" target="_blank" rel="noreferrer">Reddit</a>
                </li>
                <li>
                  <a href="https://x.com/@TheBitcoinIIOrg" target="_blank" rel="noreferrer">X (Twitter)</a>
                </li>
              </ul>
            </div>
          </details>
        </nav>
      </header>
      <main>
        <section class="hero">
          <div class="hero-intro section-card">
            <p class="eyebrow">Live bc2 intelligence</p>
            <h2>What if you had a second chance?</h2>
            <p>
              Stay on top of Bitcoin II with live price telemetry, halving momentum, and curated resources crafted for
              the community. Built to feel premium on any screen.
            </p>
            <div class="hero-actions">
              <a class="btn primary" href="https://github.com/Bitcoin-II" target="_blank" rel="noreferrer">Explore the project</a>
              <a class="btn ghost" href="https://wallet-bc2.nitopool.fr/" target="_blank" rel="noreferrer">Open web wallet</a>
            </div>
            <div class="hero-meta">
              <span id="market-as-of">CoinPaprika • syncing…</span>
            </div>
          </div>
          <div class="hero-panels">
            <div class="hero-market section-card">
              <div class="price-row">
                <strong id="live-price">--</strong>
                <div class="change-label">
                  <span id="live-change">--</span>
                  <small>24h</small>
                </div>
              </div>
              <div class="sparkline" id="mini-chart" aria-hidden="true"></div>
              <div class="hero-stats">
                <div class="stat-tile">
                  <span>Market cap</span>
                  <strong id="market-cap">--</strong>
                </div>
                <div class="stat-tile">
                  <span>24h volume</span>
                  <strong id="market-volume">--</strong>
                </div>
                <div class="stat-tile">
                  <span>7d change</span>
                  <strong id="market-change-7d">--</strong>
                </div>
                <div class="stat-tile">
                  <span>Updated</span>
                  <strong id="market-updated">—</strong>
                </div>
              </div>
            </div>
            <div class="quick-glance section-card">
              <div class="quick-glance-header">
                <div>
                  <p class="eyebrow eyebrow--wide">Spot pulse</p>
                  <strong id="side-price">--</strong>
                </div>
                <span id="side-change">--</span>
              </div>
              <div class="sparkline" id="side-mini" aria-hidden="true"></div>
            </div>
          </div>
        </section>

        <section class="progress-card section-card">
          <div>
            <p class="eyebrow">Circulation</p>
            <h3 class="metric-title">
              <span id="supply-minted">--</span>
              <small class="metric-subtitle">Minted • <span id="supply-percent">--</span> of 21M</small>
            </h3>
          </div>
          <div>
            <p class="eyebrow">Halving trajectory</p>
            <div class="progress-bar" role="progressbar" aria-labelledby="halving-progress-label">
              <span id="halving-progress"></span>
            </div>
            <div class="metric-details">
              <strong id="halving-progress-label">—</strong>
              <span class="network-meta">Next reward drop at block <span id="next-halving-height">--</span></span>
              <span class="network-meta">ETA <span id="halving-eta">—</span> • countdown <span id="halving-countdown">—</span></span>
            </div>
          </div>
          <div class="supply-grid">
            <div class="stat-tile">
              <span>Current block reward</span>
              <strong id="block-reward">--</strong>
            </div>
            <div class="stat-tile">
              <span>Average block time</span>
              <strong id="avg-block-time">--</strong>
            </div>
            <div class="stat-tile">
              <span>Difficulty trend</span>
              <strong id="difficulty-trend">--</strong>
            </div>
          </div>
        </section>

        <section class="network-shell">
          <div class="block-shell">
            <div class="block-feed-wrapper section-card">
              <div class="network-meta" id="network-as-of">bitcoinii.space • syncing…</div>
              <div class="network-summary">
                <div class="network-card">
                  <span>Height</span>
                  <strong id="height">--</strong>
                </div>
                <div class="network-card">
                  <span>Difficulty</span>
                  <strong id="difficulty">--</strong>
                </div>
                <div class="network-card">
                  <span>Last block</span>
                  <strong id="last-block-time">--</strong>
                </div>
              </div>
              <ul class="block-feed" id="block-list" aria-live="polite">
                <li>Waiting for the latest blocks…</li>
              </ul>
            </div>
            <aside class="follow-card section-card">
              <h3 class="section-title">Block spotlight</h3>
              <div class="follow-grid">
                <div class="follow-row">
                  <span class="follow-label">Height</span>
                  <strong id="follow-height">--</strong>
                </div>
                <div class="follow-row">
                  <span class="follow-label">Mined</span>
                  <span id="follow-time">--</span>
                </div>
                <div class="follow-row">
                  <span class="follow-label">Transactions</span>
                  <span id="follow-tx">--</span>
                </div>
                <div class="follow-row">
                  <span class="follow-label">Miner</span>
                  <span id="follow-miner">--</span>
                </div>
                <div class="follow-row">
                  <span class="follow-label">Reward</span>
                  <span id="follow-reward">--</span>
                </div>
              </div>
            </aside>
          </div>
        </section>

        <section class="markets-card section-card">
          <div class="section-heading">
            <h3>Active markets</h3>
            <span class="section-subtitle">See also the Exchanges menu for direct trading venues.</span>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th scope="col">Exchange</th>
                  <th scope="col">Pair</th>
                  <th scope="col">Price</th>
                  <th scope="col">24h volume</th>
                </tr>
              </thead>
              <tbody id="markets-body">
                <tr>
                  <td colspan="4">Loading market data…</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="trade-card section-card">
          <h3 class="section-title">Trade impact estimator</h3>
          <form id="trade-form" class="trade-form">
            <div class="input-group">
              <label for="trade-amount">Amount (BC2)</label>
              <input id="trade-amount" type="number" min="0" step="0.01" placeholder="50" />
            </div>
            <div class="input-group">
              <label for="trade-side">Order side</label>
              <select id="trade-side">
                <option value="buy">Buy</option>
                <option value="sell">Sell</option>
              </select>
            </div>
            <div class="input-group">
              <label for="trade-slippage">Expected impact (%)</label>
              <input id="trade-slippage" type="number" step="0.01" value="0.5" />
              <small class="help-text">Impact reference <span id="trade-impact">--</span></small>
            </div>
            <button class="btn primary" type="submit">Estimate order</button>
          </form>
          <div class="trade-meta">
            <div class="trade-meta-row">
              <span>Spot price</span>
              <strong id="trade-price">--</strong>
            </div>
            <div class="trade-meta-row">
              <span>Fill price</span>
              <strong id="trade-fill">--</strong>
            </div>
            <div class="trade-meta-row">
              <span>Order total</span>
              <strong id="trade-total">--</strong>
            </div>
            <div class="trade-meta-row">
              <span>Delta</span>
              <strong id="trade-delta">--</strong>
            </div>
            <div class="trade-note" id="trade-status">Waiting for live price data…</div>
          </div>
        </section>

      </main>
      <footer>
        <div>
          © BC2 Protocol — Data sourced from CoinPaprika &amp; bitcoinii.space.
          <span class="footer-donate">Support the devs: bc1qql0g04twdg8l9f7tfvvekzj5yf58y6la6tpet5</span>
        </div>
      </footer>
    </div>
    <script>
      (function () {
        const dom = {
          price: document.getElementById("live-price"),
          change: document.getElementById("live-change"),
          sidePrice: document.getElementById("side-price"),
          sideChange: document.getElementById("side-change"),
          volume: document.getElementById("market-volume"),
          cap: document.getElementById("market-cap"),
          change7d: document.getElementById("market-change-7d"),
          updated: document.getElementById("market-updated"),
          height: document.getElementById("height"),
          difficulty: document.getElementById("difficulty"),
          lastBlock: document.getElementById("last-block-time"),
          blockList: document.getElementById("block-list"),
          chart: document.getElementById("mini-chart"),
          sideMini: document.getElementById("side-mini"),
          navHeight: document.getElementById("nav-height"),
          navExplorerAge: document.getElementById("nav-explorer-age"),
          navExplorerStatus: document.getElementById("nav-explorer-status"),
          navExplorerDot: document.getElementById("nav-explorer-dot"),
          marketAsOf: document.getElementById("market-as-of"),
          networkAsOf: document.getElementById("network-as-of"),
          blockReward: document.getElementById("block-reward"),
          supplyMinted: document.getElementById("supply-minted"),
          supplyPercent: document.getElementById("supply-percent"),
          halvingProgressLabel: document.getElementById("halving-progress-label"),
          halvingProgress: document.getElementById("halving-progress"),
          nextHalvingHeight: document.getElementById("next-halving-height"),
          halvingEta: document.getElementById("halving-eta"),
          halvingCountdown: document.getElementById("halving-countdown"),
          avgBlockTime: document.getElementById("avg-block-time"),
          difficultyTrend: document.getElementById("difficulty-trend"),
          marketsBody: document.getElementById("markets-body"),
          tradeForm: document.getElementById("trade-form"),
          tradeAmount: document.getElementById("trade-amount"),
          tradeSide: document.getElementById("trade-side"),
          tradeSlippage: document.getElementById("trade-slippage"),
          tradeImpact: document.getElementById("trade-impact"),
          tradePrice: document.getElementById("trade-price"),
          tradeFill: document.getElementById("trade-fill"),
          tradeTotal: document.getElementById("trade-total"),
          tradeDelta: document.getElementById("trade-delta"),
          tradeStatus: document.getElementById("trade-status"),
          followHeight: document.getElementById("follow-height"),
          followTime: document.getElementById("follow-time"),
          followTx: document.getElementById("follow-tx"),
          followMiner: document.getElementById("follow-miner"),
          followReward: document.getElementById("follow-reward"),
        };

        const header = document.querySelector("header.top-nav");
        const nav = document.getElementById("primary-navigation");
        const navToggle = document.querySelector(".nav-toggle");
        const navOverlay = header ? header.querySelector(".nav-overlay") : null;
        const navDropdowns = nav ? Array.from(nav.querySelectorAll("details.nav-dropdown")) : [];
        const desktopDropdownHandlers = new Map();
        const mobileQuery =
          typeof window !== "undefined" && typeof window.matchMedia === "function"
            ? window.matchMedia("(max-width: 780px)")
            : {
                matches: false,
                addEventListener: null,
                addListener: null,
              };

        const openDesktopDropdown = (dropdown) => {
          if (!dropdown) return;
          navDropdowns.forEach((other) => {
            if (other !== dropdown) other.removeAttribute("open");
          });
          dropdown.setAttribute("open", "");
        };

        const closeDesktopDropdown = (dropdown) => {
          if (!dropdown) return;
          dropdown.removeAttribute("open");
        };

        const bindDesktopDropdown = (dropdown) => {
          if (!dropdown || desktopDropdownHandlers.has(dropdown)) return;
          const handleEnter = () => {
            if (mobileQuery.matches) return;
            openDesktopDropdown(dropdown);
          };
          const handleLeave = () => {
            if (mobileQuery.matches) return;
            closeDesktopDropdown(dropdown);
          };
          const handleFocusIn = () => {
            if (mobileQuery.matches) return;
            openDesktopDropdown(dropdown);
          };
          const handleFocusOut = () => {
            if (mobileQuery.matches) return;
            const raf =
              typeof window !== "undefined" && typeof window.requestAnimationFrame === "function"
                ? window.requestAnimationFrame.bind(window)
                : (cb) => setTimeout(cb, 16);
            raf(() => {
              if (!dropdown.contains(document.activeElement)) {
                closeDesktopDropdown(dropdown);
              }
            });
          };
          dropdown.addEventListener("mouseenter", handleEnter);
          dropdown.addEventListener("mouseleave", handleLeave);
          dropdown.addEventListener("focusin", handleFocusIn);
          dropdown.addEventListener("focusout", handleFocusOut);
          desktopDropdownHandlers.set(dropdown, {
            handleEnter,
            handleLeave,
            handleFocusIn,
            handleFocusOut,
          });
        };

        const unbindDesktopDropdown = (dropdown) => {
          if (!dropdown || !desktopDropdownHandlers.has(dropdown)) return;
          const handlers = desktopDropdownHandlers.get(dropdown);
          dropdown.removeEventListener("mouseenter", handlers.handleEnter);
          dropdown.removeEventListener("mouseleave", handlers.handleLeave);
          dropdown.removeEventListener("focusin", handlers.handleFocusIn);
          dropdown.removeEventListener("focusout", handlers.handleFocusOut);
          desktopDropdownHandlers.delete(dropdown);
        };

        const refreshDropdownBindings = () => {
          if (!navDropdowns.length) return;
          if (mobileQuery.matches) {
            navDropdowns.forEach((dropdown) => {
              unbindDesktopDropdown(dropdown);
              closeDesktopDropdown(dropdown);
            });
          } else {
            navDropdowns.forEach((dropdown) => bindDesktopDropdown(dropdown));
          }
        };

        const setNavOpen = (open) => {
          if (!header || !navToggle) return;
          header.classList.toggle("is-nav-open", open);
          document.body.classList.toggle("nav-open", open && mobileQuery.matches);
          navToggle.setAttribute("aria-expanded", String(open));
          if (nav) {
            const shouldHide = mobileQuery.matches && !open;
            nav.setAttribute("aria-hidden", shouldHide ? "true" : "false");
          }
          if (!open && mobileQuery.matches) {
            navDropdowns.forEach((dropdown) => dropdown.removeAttribute("open"));
          }
        };

        const handleViewportChange = (event) => {
          if (event.matches) {
            setNavOpen(false);
          } else {
            document.body.classList.remove("nav-open");
            if (navToggle) {
              navToggle.setAttribute("aria-expanded", "false");
            }
            if (header) {
              header.classList.remove("is-nav-open");
            }
          }
          if (nav) {
            nav.setAttribute("aria-hidden", event.matches ? "true" : "false");
          }
          refreshDropdownBindings();
        };

        if (navToggle && header) {
          navToggle.addEventListener("click", () => {
            const isExpanded = navToggle.getAttribute("aria-expanded") === "true";
            setNavOpen(!isExpanded);
          });

          if (navOverlay) {
            navOverlay.addEventListener("click", () => {
              setNavOpen(false);
            });
          }

          document.addEventListener("click", (event) => {
            if (!mobileQuery.matches) return;
            if (!header.contains(event.target)) {
              setNavOpen(false);
            }
          });

          document.addEventListener("keydown", (event) => {
            if (event.key === "Escape") {
              setNavOpen(false);
              if (mobileQuery.matches) {
                navToggle.focus();
              }
            }
          });

          if (typeof mobileQuery.addEventListener === "function") {
            mobileQuery.addEventListener("change", handleViewportChange);
          } else if (typeof mobileQuery.addListener === "function") {
            mobileQuery.addListener(handleViewportChange);
          }

          if (!mobileQuery.matches) {
            navToggle.setAttribute("aria-expanded", "false");
            header.classList.remove("is-nav-open");
          }
        }

        if (nav) {
          nav.setAttribute("aria-hidden", mobileQuery.matches ? "true" : "false");
        }

        if (navDropdowns.length) {
          navDropdowns.forEach((dropdown) => {
            dropdown.addEventListener("toggle", () => {
              if (!dropdown.open || !mobileQuery.matches) return;
              navDropdowns.forEach((other) => {
                if (other !== dropdown) other.removeAttribute("open");
              });
            });
          });
        }

        refreshDropdownBindings();

        if (nav) {
          nav.addEventListener("click", (event) => {
            if (!mobileQuery.matches) return;
            const target = event.target;
            if (!(target instanceof Element)) return;
            const link = target.closest("a");
            if (link) {
              setNavOpen(false);
            }
          });
        }

        const brandLogo = document.querySelector(".brand-logo");
        if (brandLogo) {
          const setLogoTilt = (event) => {
            const rect = brandLogo.getBoundingClientRect();
            const x = (event.clientX - rect.left) / rect.width;
            const y = (event.clientY - rect.top) / rect.height;
            const rotateX = (0.5 - y) * 16;
            const rotateY = (x - 0.5) * 16;
            brandLogo.style.setProperty("--tilt-x", `${rotateX.toFixed(2)}deg`);
            brandLogo.style.setProperty("--tilt-y", `${rotateY.toFixed(2)}deg`);
            brandLogo.style.setProperty("--glow-x", `${(x * 100).toFixed(2)}%`);
            brandLogo.style.setProperty("--glow-y", `${(y * 100).toFixed(2)}%`);
          };

          const resetLogoTilt = () => {
            brandLogo.style.setProperty("--tilt-x", "0deg");
            brandLogo.style.setProperty("--tilt-y", "0deg");
            brandLogo.style.setProperty("--glow-x", "50%");
            brandLogo.style.setProperty("--glow-y", "50%");
          };

          resetLogoTilt();
          brandLogo.addEventListener("pointermove", setLogoTilt);
          brandLogo.addEventListener("pointerleave", resetLogoTilt);
          brandLogo.addEventListener("pointerup", resetLogoTilt);
        }

        const API = {
          ticker: "https://api.coinpaprika.com/v1/tickers/bc2-bitcoin-ii",
          history: "https://api.coinpaprika.com/v1/tickers/bc2-bitcoin-ii/historical",
          markets: "https://api.coinpaprika.com/v1/coins/bc2-bitcoin-ii/markets?quotes=USD",
          blocks: "https://bitcoinii.space/api/blocks?limit=5",
        };

        const MAX_SUPPLY = 21_000_000;
        const HALVING_INTERVAL = 210_000;
        const INITIAL_REWARD = 50;

        let historyLoaded = false;
        let historyLoading = false;
        let timers = [];
        const state = {
          lastPrice: null,
          change24h: null,
        };

        const numberFormatter = new Intl.NumberFormat(undefined, {
          maximumFractionDigits: 0,
        });
        const percentFormatter = new Intl.NumberFormat(undefined, {
          maximumFractionDigits: 2,
        });
        const relativeFormatter =
          typeof Intl !== "undefined" && Intl.RelativeTimeFormat
            ? new Intl.RelativeTimeFormat(undefined, { numeric: "auto" })
            : null;

        function fetchJson(url, timeout = 10000) {
          const controller = new AbortController();
          const timer = setTimeout(() => controller.abort(), timeout);
          return fetch(url, { signal: controller.signal, cache: "no-store" })
            .then((response) => {
              if (!response.ok) {
                throw new Error(`Status ${response.status}`);
              }
              return response.json();
            })
            .finally(() => clearTimeout(timer));
        }

        function renderSpark(el, series) {
          if (!el || !Array.isArray(series) || series.length < 2) return;
          const w = 200;
          const h = 60;
          const min = Math.min(...series);
          const max = Math.max(...series);
          const norm = (value) => ((value - min) / (max - min || 1)) * (h - 6) + 3;
          const step = w / (series.length - 1);
          let d = "M0 " + (h - norm(series[0]));
          for (let i = 1; i < series.length; i++) {
            d += " L " + i * step + " " + (h - norm(series[i]));
          }
          el.innerHTML = `<svg width="${w}" height="${h}" viewBox="0 0 ${w} ${h}" xmlns="http://www.w3.org/2000/svg"><path d="${d}" fill="none" stroke="url(#g)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#00e0ff" stop-opacity="0.95"/><stop offset="1" stop-color="#00bcd7" stop-opacity="0.95"/></linearGradient></defs></svg>`;
        }

        function formatCurrency(value) {
          if (!Number.isFinite(Number(value))) return "—";
          const num = Number(value);
          const opts = { maximumFractionDigits: num < 1 ? 6 : 2 };
          return "$" + num.toLocaleString(undefined, opts);
        }

        function formatPercent(value) {
          if (!Number.isFinite(Number(value))) return "—";
          const num = Number(value);
          const prefix = num > 0 ? "+" : "";
          return prefix + num.toFixed(2) + "%";
        }

        function formatSignedPercent(value) {
          if (!Number.isFinite(Number(value))) return "—";
          const num = Number(value);
          const prefix = num > 0 ? "+" : "";
          return prefix + num.toFixed(2) + "%";
        }

        function applyChange(el, value) {
          if (!el) return;
          if (!Number.isFinite(Number(value))) {
            el.textContent = "—";
            el.classList.remove("negative");
            return;
          }
          const num = Number(value);
          el.textContent = formatPercent(num);
          if (num < 0) {
            el.classList.add("negative");
          } else {
            el.classList.remove("negative");
          }
        }

        function formatNumber(value, options) {
          if (!Number.isFinite(Number(value))) return "—";
          return Number(value).toLocaleString(undefined, options);
        }

        function updateImpactLabel(value) {
          if (!dom.tradeImpact) return;
          const num = Number(value);
          if (!Number.isFinite(num)) {
            dom.tradeImpact.textContent = "—";
            return;
          }
          const prefix = num > 0 ? "+" : "";
          dom.tradeImpact.textContent = `${prefix}${num.toFixed(2)}%`;
        }

        function updateTradeSimulation() {
          if (!dom.tradePrice || !dom.tradeAmount) return;
          const price = Number(state.lastPrice);
          const amountValue = Number(dom.tradeAmount.value);
          const impactValue = Number(dom.tradeSlippage?.value ?? 0);
          const side = dom.tradeSide?.value || "buy";

          if (!Number.isFinite(price) || price <= 0) {
            dom.tradePrice.textContent =
              dom.tradeFill.textContent =
              dom.tradeTotal.textContent =
              dom.tradeDelta.textContent =
                "—";
            dom.tradeDelta?.classList.remove("negative");
            if (dom.tradeStatus) {
              dom.tradeStatus.textContent = "Waiting for live price data…";
            }
            return;
          }

          const hasAmount = Number.isFinite(amountValue) && amountValue > 0;
          const qty = hasAmount ? amountValue : 0;
          const impact = Number.isFinite(impactValue) ? impactValue : 0;
          const fillPrice = price * (1 + impact / 100);
          const total = qty * fillPrice;
          const deltaPercent = ((fillPrice - price) / price) * 100;

          dom.tradePrice.textContent = formatCurrency(price);
          dom.tradeFill.textContent = formatCurrency(fillPrice);
          dom.tradeTotal.textContent = hasAmount ? formatCurrency(total) : "—";
          if (dom.tradeDelta) {
            dom.tradeDelta.textContent = formatSignedPercent(deltaPercent);
            if (deltaPercent < 0) {
              dom.tradeDelta.classList.add("negative");
            } else {
              dom.tradeDelta.classList.remove("negative");
            }
          }

          if (dom.tradeStatus) {
            if (!hasAmount) {
              dom.tradeStatus.textContent =
                "Enter an amount to simulate an order.";
            } else {
              const sideLabel = side === "sell" ? "Proceeds" : "Cost";
              const qtyLabel = qty.toLocaleString(undefined, {
                maximumFractionDigits: qty < 1 ? 6 : 2,
              });
              const changeSuffix = Number.isFinite(Number(state.change24h))
                ? ` 24h move: ${formatSignedPercent(state.change24h)}.`
                : "";
              dom.tradeStatus.textContent = `${sideLabel} estimate for ${qtyLabel} BC2 at ${
                dom.tradeImpact?.textContent ?? `${impact.toFixed(2)}%`
              } impact.${changeSuffix}`;
            }
          }
        }

        function updateBlockFollow(block) {
          if (!dom.followHeight) {
            return;
          }
          if (!block) {
            dom.followHeight.textContent = "—";
            if (dom.followTime) dom.followTime.textContent = "—";
            if (dom.followTx) dom.followTx.textContent = "—";
            if (dom.followMiner) dom.followMiner.textContent = "—";
            if (dom.followReward) dom.followReward.textContent = "—";
            return;
          }
          if (dom.followHeight) {
            dom.followHeight.textContent = formatNumber(block.height);
          }
          if (dom.followTime) {
            const timestamp = Number(block.timestamp) * 1000;
            dom.followTime.textContent = Number.isFinite(timestamp)
              ? formatTimeAgo(new Date(timestamp))
              : "—";
          }
          if (dom.followTx) {
            dom.followTx.textContent = Number.isFinite(Number(block.tx_count))
              ? Number(block.tx_count).toLocaleString()
              : "—";
          }
          if (dom.followMiner) {
            const miner =
              block?.extras?.pool?.name ||
              block?.extras?.coinbaseAddress ||
              (Array.isArray(block?.extras?.coinbaseAddresses)
                ? block.extras.coinbaseAddresses[0]
                : null);
            dom.followMiner.textContent = miner || "Unknown";
          }
          if (dom.followReward) {
            const rewardSat = block?.extras?.reward;
            if (Number.isFinite(Number(rewardSat))) {
              const rewardBtc = Number(rewardSat) / 100_000_000;
              dom.followReward.textContent =
                rewardBtc < 1
                  ? `${rewardBtc.toFixed(8)} BC2`
                  : `${rewardBtc.toLocaleString(undefined, {
                      maximumFractionDigits: 2,
                    })} BC2`;
            } else {
              dom.followReward.textContent = "—";
            }
          }
        }

        function initTradeSimulation() {
          if (!dom.tradeForm) return;
          dom.tradeForm.addEventListener("submit", (event) => {
            event.preventDefault();
            updateTradeSimulation();
          });
          dom.tradeAmount?.addEventListener("input", updateTradeSimulation);
          dom.tradeSide?.addEventListener("change", updateTradeSimulation);
          dom.tradeSlippage?.addEventListener("input", (event) => {
            updateImpactLabel(event.target.value);
            updateTradeSimulation();
          });
          updateImpactLabel(dom.tradeSlippage?.value ?? 0);
          updateTradeSimulation();
        }

        function formatSize(bytes) {
          if (!Number.isFinite(Number(bytes))) return "—";
          const num = Number(bytes);
          if (num < 1024) return `${num} B`;
          if (num < 1024 * 1024) return (num / 1024).toFixed(1) + " kB";
          return (num / (1024 * 1024)).toFixed(2) + " MB";
        }

        function formatTimeAgo(date) {
          if (!(date instanceof Date) || Number.isNaN(date.getTime()))
            return "—";
          const diff = Date.now() - date.getTime();
          const table = [
            ["day", 86_400_000],
            ["hour", 3_600_000],
            ["minute", 60_000],
            ["second", 1_000],
          ];
          for (const [unit, ms] of table) {
            const value = Math.round(diff / ms);
            if (Math.abs(value) >= 1 || unit === "second") {
              return relativeFormatter
                ? relativeFormatter.format(-value, unit)
                : `${Math.abs(value)} ${unit}${Math.abs(value) === 1 ? "" : "s"} ago`;
            }
          }
          return "just now";
        }

        function formatDuration(seconds) {
          if (!Number.isFinite(Number(seconds))) return "—";
          const total = Math.max(0, Number(seconds));
          const days = Math.floor(total / 86_400);
          const hours = Math.floor((total % 86_400) / 3_600);
          const minutes = Math.floor((total % 3_600) / 60);
          const parts = [];
          if (days) parts.push(`${days} day${days === 1 ? "" : "s"}`);
          if (hours) parts.push(`${hours} hr${hours === 1 ? "" : "s"}`);
          if (parts.length < 2 && minutes)
            parts.push(`${minutes} min${minutes === 1 ? "" : "s"}`);
          return parts.length ? parts.join(", ") : "under a minute";
        }

        function computeReward(height) {
          if (!Number.isFinite(Number(height))) return 0;
          const halvings = Math.floor(Number(height) / HALVING_INTERVAL);
          const reward = INITIAL_REWARD / Math.pow(2, halvings);
          return reward < 0.00000001 ? 0 : reward;
        }

        function renderBlockList(blocks) {
          if (!dom.blockList) return;
          dom.blockList.innerHTML = blocks
            .map((block) => {
              const reward = computeReward(block.height);
              const ts = new Date(Number(block.timestamp) * 1000);
              const age = formatTimeAgo(ts);
              const txCount = Number(block.tx_count) || 0;
              const size = formatSize(block.size);
              const miner =
                block?.extras?.pool?.name ||
                block?.extras?.coinbaseAddress ||
                (Array.isArray(block?.extras?.coinbaseAddresses)
                  ? block.extras.coinbaseAddresses[0]
                  : "Unknown");
              return `<li><div class="block-headline"><span>#${formatNumber(
                block.height,
              )}</span><span>${age}</span></div><div class="block-meta"><span>${txCount} txs</span><span>${size}</span><span>${reward.toFixed(
                reward < 1 ? 8 : 2,
              )} BC2</span></div><div class="block-meta">Mined by ${miner}</div></li>`;
            })
            .join("");
        }

        function computeAvgBlockTime(blocks) {
          if (!Array.isArray(blocks) || blocks.length < 2) return null;
          const diffs = [];
          for (let i = 1; i < blocks.length; i++) {
            const current = Number(blocks[i - 1]?.timestamp);
            const next = Number(blocks[i]?.timestamp);
            if (Number.isFinite(current) && Number.isFinite(next)) {
              diffs.push(current - next);
            }
          }
          if (!diffs.length) return null;
          const avgSeconds = diffs.reduce((sum, value) => sum + value, 0) / diffs.length;
          return avgSeconds;
        }

        function updateTelemetry(height, blocks, avgSeconds) {
          if (dom.blockReward) {
            const reward = computeReward(height);
            dom.blockReward.textContent = reward ? `${reward.toFixed(reward < 1 ? 8 : 2)} BC2` : "—";
          }

          if (dom.avgBlockTime) {
            dom.avgBlockTime.textContent = avgSeconds ? formatDuration(avgSeconds) : "—";
          }

          if (dom.difficultyTrend) {
            const latest = blocks?.[0];
            const previous = blocks?.[blocks.length - 1];
            if (latest && previous && Number.isFinite(latest.difficulty) && Number.isFinite(previous.difficulty)) {
              const change = ((latest.difficulty - previous.difficulty) / previous.difficulty) * 100;
              dom.difficultyTrend.textContent = formatSignedPercent(change);
              if (change < 0) {
                dom.difficultyTrend.classList.add("negative");
              } else {
                dom.difficultyTrend.classList.remove("negative");
              }
            } else {
              dom.difficultyTrend.textContent = "—";
              dom.difficultyTrend.classList.remove("negative");
            }
          }

          if (!Number.isFinite(height)) return;

          const halvings = Math.floor(height / HALVING_INTERVAL);
          const nextHalvingHeight = (halvings + 1) * HALVING_INTERVAL;
          const remainingBlocks = nextHalvingHeight - height;
          const progress = Math.max(0, Math.min(1, height / nextHalvingHeight));

          if (dom.halvingProgress) {
            dom.halvingProgress.style.width = `${(progress * 100).toFixed(2)}%`;
          }
          if (dom.halvingProgressLabel) {
            dom.halvingProgressLabel.textContent = `Halving ${halvings + 1} progress ${(
              progress * 100
            ).toFixed(2)}%`;
          }
          if (dom.nextHalvingHeight) {
            dom.nextHalvingHeight.textContent = formatNumber(nextHalvingHeight);
          }
          if (dom.supplyMinted) {
            const emitted = MAX_SUPPLY - computeRemainingSupply(nextHalvingHeight, remainingBlocks);
            dom.supplyMinted.textContent = emitted.toLocaleString(undefined, {
              maximumFractionDigits: 0,
            });
          }
          if (dom.supplyPercent) {
            const emitted = MAX_SUPPLY - computeRemainingSupply(nextHalvingHeight, remainingBlocks);
            dom.supplyPercent.textContent = ((emitted / MAX_SUPPLY) * 100).toFixed(2) + "%";
          }
          if (dom.halvingEta) {
            const secondsRemaining = Number.isFinite(avgSeconds)
              ? remainingBlocks * avgSeconds
              : remainingBlocks * 120;
            dom.halvingEta.textContent = formatDuration(secondsRemaining);
          }
          if (dom.halvingCountdown) {
            const secondsRemaining = Number.isFinite(avgSeconds)
              ? remainingBlocks * avgSeconds
              : remainingBlocks * 120;
            dom.halvingCountdown.textContent = formatDuration(secondsRemaining);
          }
        }

        function computeRemainingSupply(nextHalvingHeight, remainingBlocks) {
          let total = 0;
          let reward = INITIAL_REWARD;
          let height = 0;
          while (reward > 0 && height < nextHalvingHeight) {
            const span = Math.min(HALVING_INTERVAL, nextHalvingHeight - height);
            total += span * reward;
            reward /= 2;
            height += span;
          }
          const currentReward = computeReward(nextHalvingHeight - remainingBlocks);
          total -= remainingBlocks * currentReward;
          return total;
        }

        async function updateHistory() {
          if (historyLoaded || historyLoading) return;
          historyLoading = true;
          try {
            const now = Date.now();
            const start = now - 1000 * 60 * 60 * 24 * 7;
            const params = new URLSearchParams({
              start: new Date(start).toISOString(),
              end: new Date(now).toISOString(),
              limit: "30",
            });
            const history = await fetchJson(`${API.history}?${params.toString()}`);
            const series = Array.isArray(history)
              ? history
                  .filter((entry) => Number.isFinite(entry?.price))
                  .map((entry) => Number(entry.price))
              : null;
            if (series && series.length > 1) {
              renderSpark(dom.chart, series);
              renderSpark(dom.sideMini, series.slice(-15));
            }
            historyLoaded = true;
          } catch (err) {
            console.warn("Unable to load BC2 price history", err);
          } finally {
            historyLoading = false;
          }
        }

        function initHistoryObserver() {
          if (!('IntersectionObserver' in window) || !dom.chart) {
            updateHistory();
            return;
          }
          const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                updateHistory();
                obs.disconnect();
              }
            });
          });
          observer.observe(dom.chart);
        }

        async function updateMarket() {
          try {
            const data = await fetchJson(API.ticker);
            if (!data || !data.quotes || !data.quotes.USD) throw new Error("Missing USD quote");
            const usd = data.quotes.USD;
            dom.price.textContent = dom.sidePrice.textContent = formatCurrency(usd.price);
            applyChange(dom.change, usd.percent_change_24h);
            applyChange(dom.sideChange, usd.percent_change_24h);
            dom.volume.textContent = formatCurrency(usd.volume_24h);
            dom.cap.textContent = formatCurrency(usd.market_cap);
            dom.change7d.textContent = formatPercent(usd.percent_change_7d);
            const updated = new Date(data.last_updated * 1000);
            dom.updated.textContent = formatTimeAgo(updated);
            if (dom.marketAsOf) {
              const relative = formatTimeAgo(updated);
              dom.marketAsOf.textContent = `CoinPaprika • updated ${relative}`;
            }

            state.lastPrice = Number(usd.price);
            state.change24h = Number(usd.percent_change_24h);
            updateTradeSimulation();

            if (!historyLoaded) {
              updateHistory();
            }
          } catch (err) {
            console.warn("Unable to load BC2 market data", err);
            dom.price.textContent = dom.sidePrice.textContent = "—";
            dom.change.textContent = dom.sideChange.textContent = "—";
            dom.change.classList.remove("negative");
            dom.sideChange.classList.remove("negative");
            dom.volume.textContent =
              dom.cap.textContent =
              dom.change7d.textContent =
                "—";
            state.lastPrice = null;
            state.change24h = null;
            updateTradeSimulation();
            if (dom.marketAsOf) {
              dom.marketAsOf.textContent =
                "CoinPaprika • unable to fetch live data";
            }
          }
        }

        async function updateBlocks() {
          try {
            const blocks = await fetchJson(API.blocks);
            if (!Array.isArray(blocks) || blocks.length === 0)
              throw new Error("No blocks returned");
            const latest = blocks[0];
            updateBlockFollow(latest);
            dom.height.textContent = formatNumber(latest.height);
            if (dom.navHeight) {
              dom.navHeight.textContent = formatNumber(latest.height);
            }
            dom.difficulty.textContent = formatNumber(latest.difficulty, {
              maximumFractionDigits: 2,
            });
            const latestTime = new Date(Number(latest.timestamp) * 1000);
            dom.lastBlock.textContent = formatTimeAgo(latestTime);
            if (dom.navExplorerAge) {
              dom.navExplorerAge.textContent = formatTimeAgo(latestTime);
            }
            if (dom.networkAsOf) {
              const relative = formatTimeAgo(latestTime);
              dom.networkAsOf.textContent = `bitcoinii.space • updated ${relative}`;
            }
            if (dom.navExplorerStatus) {
              dom.navExplorerStatus.textContent = "Live";
            }
            if (dom.navExplorerDot) {
              dom.navExplorerDot.classList.add("is-live");
              dom.navExplorerDot.classList.remove("is-offline");
            }

            renderBlockList(blocks);
            const avgSeconds = computeAvgBlockTime(blocks);
            updateTelemetry(Number(latest.height), blocks, avgSeconds);
          } catch (err) {
            console.warn("Unable to load BC2 blocks", err);
            if (dom.blockList) {
              dom.blockList.innerHTML =
                "<li><span>Unable to load blocks. Visit the explorer for the latest data.</span></li>";
            }
            updateBlockFollow(null);
            if (dom.navHeight) {
              dom.navHeight.textContent = "--";
            }
            if (dom.navExplorerAge) {
              dom.navExplorerAge.textContent = "—";
            }
            if (dom.navExplorerStatus) {
              dom.navExplorerStatus.textContent = "Offline";
            }
            if (dom.navExplorerDot) {
              dom.navExplorerDot.classList.remove("is-live");
              dom.navExplorerDot.classList.add("is-offline");
            }
            if (dom.networkAsOf) {
              dom.networkAsOf.textContent =
                "bitcoinii.space • unable to reach explorer";
            }
          }
        }

        function renderMarketsTable(markets) {
          if (!dom.marketsBody) return;
          if (!Array.isArray(markets) || markets.length === 0) {
            dom.marketsBody.innerHTML =
              '<tr><td colspan="4">No public markets reported on CoinPaprika.</td></tr>';
            return;
          }
          const sorted = markets
            .filter((market) => market?.quotes?.USD)
            .sort(
              (a, b) =>
                Number(b.quotes.USD.volume_24h || 0) -
                Number(a.quotes.USD.volume_24h || 0),
            )
            .slice(0, 6);

          if (sorted.length === 0) {
            dom.marketsBody.innerHTML =
              '<tr><td colspan="4">No USD-quoted markets available.</td></tr>';
            return;
          }

          dom.marketsBody.innerHTML = sorted
            .map((market) => {
              const quote = market.quotes.USD;
              const exchange = market.exchange_name || market.market || "—";
              const price = formatCurrency(quote.price);
              const volume = formatCurrency(quote.volume_24h);
              const link =
                market.market_url ||
                (market.url ? `https://coinpaprika.com${market.url}` : null);
              const exchangeCell = link
                ? `<a href="${link}" target="_blank" rel="noreferrer">${exchange}</a>`
                : exchange;
              return `<tr><td>${exchangeCell}</td><td>${market.pair}</td><td>${price}</td><td>${volume}</td></tr>`;
            })
            .join("");
        }

        async function updateMarkets() {
          try {
            const markets = await fetchJson(API.markets);
            renderMarketsTable(markets);
          } catch (err) {
            console.warn("Unable to load BC2 market listings", err);
            if (dom.marketsBody) {
              dom.marketsBody.innerHTML =
                '<tr><td colspan="4">Unable to reach CoinPaprika. Try again later.</td></tr>';
            }
          }
        }

        function stopIntervals() {
          timers.forEach((id) => clearInterval(id));
          timers = [];
        }

        function startIntervals() {
          stopIntervals();
          timers.push(setInterval(updateMarket, 60_000));
          timers.push(setInterval(updateBlocks, 45_000));
          timers.push(setInterval(updateMarkets, 120_000));
        }

        document.addEventListener("visibilitychange", () => {
          if (document.hidden) {
            stopIntervals();
          } else {
            updateMarket();
            updateBlocks();
            updateMarkets();
            startIntervals();
          }
        });

        window.addEventListener("beforeunload", stopIntervals);
        document.addEventListener("keydown", (e) => {
          if (e.key === "Tab") document.body.classList.add("show-focus");
        });

        initTradeSimulation();
        updateMarket();
        updateBlocks();
        updateMarkets();
        initHistoryObserver();
        startIntervals();
      })();
    </script>
  </body>
</html>
